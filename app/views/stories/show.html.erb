<script charset="utf-8">
  document.body.style.backgroundColor = "#<%= @story.color %>";  
  jscolor.installByClassName("jscolor");
</script>

<h1><%= @story.title %></h1>

<% if !@story.subtitle.blank? %>
  <h3><em><%= @story.subtitle %></em></h3>
<% end %>

<p>created by: <%= @story.creator.username %></p>

<div class="inline-buttons-container">
  <% if current_user == @story.creator %>
    <%= button_to "Edit", edit_story_path(@story), method: :get, class: "inline-buttons" %> 
    <%= button_to "Delete", "/stories/#{@story.id}", method: :delete, class: "inline-buttons", data: {confirm: "Do you want to delete this story?"} %>
  <% end %>
</div>

<hr>

<div class="story-body">
  <%= link_to "□", new_story_snippet_path(@story, position: 0), class: "new-snippet-link" %>

  <% @story.ordered_snippets.each.with_index(1) do |snippet, i| %>
    <% if snippet.paragraph_begin && snippet.position != 0 %>
      <p>
    <% end %>

    <% if snippet.user == current_user %>
      <%= link_to "#{snippet.content}", edit_story_snippet_path(@story, snippet), class: "edit-snippet-link" %>
    <% else %>
      <%= snippet.content %>    
    <% end %>

    <%= link_to "□", new_story_snippet_path(@story, position: i), class: "new-snippet-link" %>

    <% if snippet.paragraph_end && snippet.position != @story.snippets.count %>
      </p>
    <% end %>
  <% end %>
</div>
